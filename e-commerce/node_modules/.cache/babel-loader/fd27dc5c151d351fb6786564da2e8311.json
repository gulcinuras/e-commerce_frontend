{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Program Files\\\\Git\\\\ecommerce\\\\e-commerce-frontend\\\\src\\\\Comments.js\";\nimport React, { Component } from \"react\";\nimport \"react-alice-carousel/lib/alice-carousel.css\";\nimport \"./SelectOpt\";\nimport \"./Checkbox\";\nimport ReactStars from \"react-rating-stars-component\";\nimport { CardLink, Col, Container, Form, Input, Modal, Row } from \"reactstrap\";\nimport tracker from \"../src/api/tracker\";\n\nclass Comments extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      const pid = this.props.match.params.id;\n      this.setState({\n        productId: pid\n      });\n      console.log(\"this.state.productId\", this.state.productId);\n      const productresponse = await tracker.get(\"product/\" + this.state.productId);\n      console.log(\"productresponse\", productresponse);\n\n      if (productresponse.data.commentId !== null) {\n        this.setState({\n          commentId: productresponse.data.commentId\n        });\n      }\n\n      this.setState({\n        productId: productresponse.data._id\n      });\n      var loggedin = localStorage.getItem('userId');\n      console.log(\"userId: \", loggedin);\n\n      if (loggedin === null) {\n        this.setState({\n          notloggedin: true\n        });\n      } else {\n        this.setState({\n          notloggedin: false\n        });\n      }\n\n      if (this.state.commentId !== \"\") {\n        try {\n          const commentresponse = await tracker.get(\"comment/\" + this.state.commentId);\n          console.log(\"commentresponse:\", commentresponse);\n          const arraycomments = commentresponse.data;\n          this.setState({\n            comments: arraycomments\n          });\n          console.log(\"state\", this.state.comments);\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    };\n\n    this.componentDidUpdate = async () => {\n      const pid = this.props.match.params.id;\n      this.setState({\n        productId: pid\n      });\n      console.log(\"this.state.productId\", this.state.productId);\n      const productresponse = await tracker.get(\"product/\" + this.state.productId);\n      console.log(\"productresponse\", productresponse);\n\n      if (productresponse.data.commentId !== null) {\n        this.setState({\n          commentId: productresponse.data.commentId\n        });\n      }\n\n      this.setState({\n        productId: productresponse.data._id\n      });\n      var loggedin = localStorage.getItem('userId');\n      console.log(\"userId: \", loggedin);\n\n      if (loggedin === null) {\n        this.setState({\n          notloggedin: true\n        });\n      } else {\n        this.setState({\n          notloggedin: false\n        });\n      }\n\n      if (this.state.commentId !== \"\") {\n        try {\n          const commentresponse = await tracker.get(\"comment/\" + this.state.commentId);\n          console.log(\"commentresponse:\", commentresponse);\n          const arraycomments = commentresponse.data;\n          this.setState({\n            comments: arraycomments\n          });\n          console.log(\"state\", this.state.comments);\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    };\n\n    this.handleValue = e => {\n      this.setState({\n        txt: e.target.value\n      });\n    };\n\n    this.handleRating = e => {\n      console.log(\"handlerating: \", e);\n      this.setState({\n        rating: e\n      });\n    };\n\n    this.handleComment = async () => {\n      const id = this.state.commentId;\n\n      if (!this.state.notloggedin) {\n        try {\n          if (id === \"\") {\n            console.log(\"rating: \", this.state.rating);\n            console.log(\"text: \", this.state.txt);\n            console.log(\"id: \", id);\n            const response = await tracker.post(\"comment/\", {\n              product: this.state.productId,\n              totalRate: this.state.rating,\n              comments: [{\n                user: localStorage.getItem(\"userId\"),\n                //duzeltilecek\n                rating: this.state.rating,\n                text: this.state.txt\n              }]\n            });\n          } else {\n            const response = await tracker.put(\"comment/\" + id, {\n              comments: [{\n                user: localStorage.getItem(\"userId\"),\n                //duzeltilecek\n                rating: this.state.rating,\n                text: this.state.txt\n              }]\n            });\n          }\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    };\n\n    this.otherReviews = () => {\n      console.log(\"otherReviews\");\n      var com_array = [];\n\n      try {\n        if (this.state.comments.length !== 0) {\n          var commentitem;\n\n          for (var i = 0; i < this.state.comments.length; i++) {\n            console.log(this.state.comments[i]);\n            const commentid = this.state.comments[i].commentId;\n            const user = this.state.comments[i].user;\n            const rating = this.state.products[i].rating;\n            const text = this.state.products[i].text;\n            commentitem = /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(ReactStars, {\n                count: 5,\n                value: rating,\n                disableButtonsControls: true,\n                size: 24,\n                isHalf: false,\n                emptyIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"far fa-star\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 44\n                }, this),\n                halfIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-star-half-alt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 43\n                }, this),\n                fullIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-star\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 43\n                }, this),\n                activeColor: \"#ffd700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 25\n            }, this);\n            com_array.push(commentitem);\n          }\n        }\n\n        return com_array;\n      } catch (e) {}\n    };\n\n    console.log(\"props:\", this.props);\n    this.state = {\n      notloggedin: true,\n      rating: 0,\n      avg_rate: 0,\n      txt: \"Type your comment here!\",\n      comments: [],\n      commentId: \"\",\n      productId: \"\"\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        className: \"form-container\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: \"form\",\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginLeft: \"-72vh\"\n              },\n              children: \"Rate the product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ReactStars, {\n              count: 5,\n              value: this.state.rating,\n              onChange: this.handleRating,\n              size: 24,\n              isHalf: false,\n              emptyIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"far fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 44\n              }, this),\n              halfIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-star-half-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 43\n              }, this),\n              fullIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 43\n              }, this),\n              activeColor: \"#ffd700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Add a comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                style: {\n                  width: \"300px\",\n                  height: \"100px\",\n                  size: \"relative\",\n                  margin: \"2rem\"\n                },\n                type: \"text\",\n                onChange: this.handleValue\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 33\n              }, this), this.handleLogin, this.state.notloggedin ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                style: {\n                  color: \"#c29fdc\",\n                  justifyContent: \"space-evenly\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Only subscribed users can comment!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 141\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  disabled: \"true\",\n                  onClick: this.handleComment,\n                  children: \"Send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 182\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 59\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"b-login\",\n                  onClick: this.handleComment,\n                  children: \"Send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 279\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 257\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: /*#__PURE__*/_jsxDEV(CardLink, {\n                onClick: () => {\n                  this.otherReviews();\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"b-login\",\n                  children: \"See other reviews\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Comments;","map":{"version":3,"sources":["C:/Program Files/Git/ecommerce/e-commerce-frontend/src/Comments.js"],"names":["React","Component","ReactStars","CardLink","Col","Container","Form","Input","Modal","Row","tracker","Comments","constructor","props","componentDidMount","pid","match","params","id","setState","productId","console","log","state","productresponse","get","data","commentId","_id","loggedin","localStorage","getItem","notloggedin","commentresponse","arraycomments","comments","e","componentDidUpdate","handleValue","txt","target","value","handleRating","rating","handleComment","response","post","product","totalRate","user","text","put","otherReviews","com_array","length","commentitem","i","commentid","products","push","avg_rate","render","marginLeft","width","height","size","margin","handleLogin","color","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"react-alice-carousel/lib/alice-carousel.css\";\r\nimport \"./SelectOpt\";\r\nimport \"./Checkbox\";\r\nimport ReactStars from \"react-rating-stars-component\";\r\nimport { CardLink, Col, Container, Form, Input, Modal, Row } from \"reactstrap\";\r\n\r\nimport tracker from \"../src/api/tracker\";\r\n\r\nclass Comments extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(\"props:\", this.props);\r\n        this.state = {\r\n            notloggedin: true,\r\n            rating: 0,\r\n            avg_rate: 0,\r\n            txt: \"Type your comment here!\",\r\n            comments: [],\r\n            commentId: \"\",\r\n            productId: \"\",\r\n        }\r\n    }\r\n    componentDidMount = async () => {\r\n        const pid = this.props.match.params.id;\r\n        this.setState({ productId: pid });\r\n        console.log(\"this.state.productId\",this.state.productId);\r\n        const productresponse = await tracker.get(\"product/\" + this.state.productId);\r\n        console.log(\"productresponse\", productresponse);\r\n        if (productresponse.data.commentId !== null) {\r\n            this.setState({ commentId: productresponse.data.commentId });\r\n        }\r\n        this.setState({ productId: productresponse.data._id });\r\n        var loggedin = localStorage.getItem('userId');\r\n        console.log(\"userId: \", loggedin);\r\n        if (loggedin === null) {\r\n            this.setState({ notloggedin: true });\r\n\r\n        }\r\n        else {\r\n            this.setState({ notloggedin: false });\r\n        }\r\n \r\n   \r\n        if (this.state.commentId !== \"\") {\r\n            try {\r\n                const commentresponse = await tracker.get(\"comment/\" + this.state.commentId);\r\n\r\n                console.log(\"commentresponse:\", commentresponse);\r\n                const arraycomments = commentresponse.data;\r\n                this.setState({ comments: arraycomments });\r\n                console.log(\"state\", this.state.comments);\r\n\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n    }\r\n    componentDidUpdate = async () => {\r\n        const pid = this.props.match.params.id;\r\n        this.setState({ productId: pid });\r\n        console.log(\"this.state.productId\", this.state.productId);\r\n        const productresponse = await tracker.get(\"product/\" + this.state.productId);\r\n        console.log(\"productresponse\", productresponse);\r\n        if (productresponse.data.commentId !== null) {\r\n            this.setState({ commentId: productresponse.data.commentId });\r\n        }\r\n        this.setState({ productId: productresponse.data._id });\r\n        var loggedin = localStorage.getItem('userId');\r\n        console.log(\"userId: \", loggedin);\r\n        if (loggedin === null) {\r\n            this.setState({ notloggedin: true });\r\n\r\n        }\r\n        else {\r\n            this.setState({ notloggedin: false });\r\n        }\r\n\r\n\r\n        if (this.state.commentId !== \"\") {\r\n            try {\r\n                const commentresponse = await tracker.get(\"comment/\" + this.state.commentId);\r\n\r\n                console.log(\"commentresponse:\", commentresponse);\r\n                const arraycomments = commentresponse.data;\r\n                this.setState({ comments: arraycomments });\r\n                console.log(\"state\", this.state.comments);\r\n\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n    }\r\n    handleValue = (e) => {\r\n        this.setState({ txt: e.target.value });\r\n    }\r\n    handleRating = (e) => {\r\n        console.log(\"handlerating: \", e)\r\n        this.setState({ rating: e });\r\n    }\r\n    handleComment = async () => {\r\n\r\n        const id = this.state.commentId;\r\n\r\n        if (!this.state.notloggedin) {\r\n            try {\r\n                if (id === \"\") {\r\n                    console.log(\"rating: \", this.state.rating);\r\n                    console.log(\"text: \", this.state.txt);\r\n                    console.log(\"id: \", id);\r\n                    const response = await tracker.post(\"comment/\", {\r\n                        product: this.state.productId,\r\n                        totalRate: this.state.rating,\r\n                        comments: [\r\n                            {\r\n                                user: localStorage.getItem(\"userId\"), //duzeltilecek\r\n                                rating: this.state.rating,\r\n                                text: this.state.txt,\r\n\r\n                            },\r\n                        ],\r\n                    });\r\n\r\n                }\r\n                else {\r\n                    const response = await tracker.put(\"comment/\" + id, {\r\n\r\n                        comments: [\r\n                            {\r\n                                user: localStorage.getItem(\"userId\"), //duzeltilecek\r\n                                rating: this.state.rating,\r\n                                text: this.state.txt,\r\n\r\n                            },\r\n                        ],\r\n                    });\r\n\r\n\r\n                }\r\n\r\n\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n\r\n    };\r\n  \r\n    otherReviews = () => {\r\n        console.log(\"otherReviews\");\r\n        var com_array = [];\r\n\r\n        try {\r\n\r\n            if (this.state.comments.length !== 0) {\r\n                var commentitem;\r\n                for (var i = 0; i < this.state.comments.length; i++) {\r\n                    console.log(this.state.comments[i]);\r\n                    const commentid = this.state.comments[i].commentId;\r\n                    const user = this.state.comments[i].user;\r\n                    const rating = this.state.products[i].rating;\r\n                    const text = this.state.products[i].text;\r\n\r\n                    commentitem = (\r\n                        <div>\r\n                            <ReactStars\r\n                                count={5}\r\n                                value={rating}\r\n                                disableButtonsControls={true}\r\n                                size={24}\r\n                                isHalf={false}\r\n                                emptyIcon={<i className=\"far fa-star\"></i>}\r\n                                halfIcon={<i className=\"fa fa-star-half-alt\"></i>}\r\n                                fullIcon={<i className=\"fa fa-star\"></i>}\r\n                                activeColor=\"#ffd700\"\r\n                            />\r\n                            <p>{text}</p>\r\n                        </div>\r\n                    );\r\n                    com_array.push(commentitem);\r\n                }\r\n\r\n\r\n            }\r\n            return (com_array);\r\n        } catch (e) { }\r\n\r\n\r\n\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            < div className=\"form\" >\r\n\r\n                < Container className=\"form-container\" >\r\n\r\n                    < Row className=\"form\" >\r\n                        < Form >\r\n                            <div style={{ marginLeft: \"-72vh\" }}>Rate the product</div>\r\n                            <ReactStars\r\n                                count={5}\r\n                                value={this.state.rating}\r\n                                onChange={this.handleRating}\r\n                                size={24}\r\n                                isHalf={false}\r\n                                emptyIcon={<i className=\"far fa-star\"></i>}\r\n                                halfIcon={<i className=\"fa fa-star-half-alt\"></i>}\r\n                                fullIcon={<i className=\"fa fa-star\"></i>}\r\n                                activeColor=\"#ffd700\"\r\n                            />\r\n                            <div>Add a comment</div>\r\n                            <div>\r\n                                <input\r\n                                    style={{ width: \"300px\", height:\"100px\", size: \"relative\", margin:\"2rem\"}}\r\n                                    type=\"text\"\r\n                                    onChange={this.handleValue}\r\n                                />\r\n                                <br />\r\n                                {this.handleLogin}\r\n                                {this.state.notloggedin ? <div className=\"row\" style={{ color: \"#c29fdc\", justifyContent: \"space-evenly\" }}><p>Only subscribed users can comment!</p><button disabled=\"true\" onClick={this.handleComment}>Send</button></div> : <div className=\"card\"><button className=\"b-login\" onClick={this.handleComment}>Send</button></div>}\r\n\r\n\r\n                            </div>\r\n\r\n                            <div className=\"card\"  >\r\n                                <CardLink\r\n                                    onClick={() => {\r\n                                        this.otherReviews();\r\n                                    }}\r\n                                >\r\n                                    <button className=\"b-login\">See other reviews</button>\r\n                                </CardLink>\r\n                            </div>\r\n                        </Form >\r\n\r\n                    </Row >\r\n\r\n                </Container >\r\n\r\n            </div >\r\n\r\n        );\r\n\r\n    }\r\n}\r\nexport default Comments;"]},"metadata":{},"sourceType":"module"}